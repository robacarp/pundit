{"repository_name":"pundit","body":"# Pundit\n\n![Shard CI](https://github.com/stephendolan/pundit/workflows/Shard%20CI/badge.svg)\n[![API Documentation Website](https://img.shields.io/website?down_color=red&down_message=Offline&label=API%20Documentation&up_message=Online&url=https%3A%2F%2Fstephendolan.github.io%2Fpundit%2F)](https://stephendolan.github.io/pundit)\n[![GitHub release](https://img.shields.io/github/release/stephendolan/pundit.svg?label=Release)](https://github.com/stephendolan/pundit/releases)\n\nA simple Crystal shard for managing authorization in [Lucky](https://luckyframework.org) applications. Intended to mimic the excellent Ruby [Pundit](https://github.com/varvet/pundit) gem.\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n```yaml\ndependencies:\n  pundit:\n    github: stephendolan/pundit\n```\n\n2. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"pundit\"\n```\n\nTODO: Write usage instructions here\n\n## Contributing\n\n1. Fork it (<https://github.com/stephendolan/pundit/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Stephen Dolan](https://github.com/stephendolan) - creator and maintainer\n\n## Inspiration\n\n- The [Pundit](https://github.com/varvet/pundit) Ruby gem was what formed my need as a programmer for this kind of simple approach to authorization\n- The [Praetorian](https://github.com/ilanusse/praetorian) Crystal shard took an excellent first step towards proving out the Pundit model in Crystal\n","program":{"html_id":"pundit/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"pundit","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"pundit/Pundit","path":"Pundit.html","kind":"module","full_name":"Pundit","name":"Pundit","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/pundit.cr","line_number":4,"url":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit.cr#L4"},{"filename":"src/pundit/action_helpers.cr","line_number":1,"url":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit/action_helpers.cr#L1"},{"filename":"src/pundit/version.cr","line_number":1,"url":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit/version.cr#L1"}],"repository_name":"pundit","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.1.0\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Module for handling authorization","summary":"<p>Module for handling authorization</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"do_something-instance-method","html_id":"do_something-instance-method","name":"do_something","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit/version.cr#L4","def":{"name":"do_something","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"puts(\"Doing something!\")"}}],"macros":[],"types":[{"html_id":"pundit/Pundit/ActionHelpers","path":"Pundit/ActionHelpers.html","kind":"module","full_name":"Pundit::ActionHelpers","name":"ActionHelpers","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/pundit/action_helpers.cr","line_number":1,"url":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit/action_helpers.cr#L1"}],"repository_name":"pundit","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"pundit/Pundit","kind":"module","full_name":"Pundit","name":"Pundit"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"current_user:T?-instance-method","html_id":"current_user:T?-instance-method","name":"current_user","doc":null,"summary":null,"abstract":true,"args":[],"args_string":" : T?","source_link":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit/action_helpers.cr#L20","def":{"name":"current_user","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"T | ::Nil","visibility":"Public","body":""}}],"macros":[{"id":"authorize(policy_class_override=nil,method_name_override=nil)-macro","html_id":"authorize(policy_class_override=nil,method_name_override=nil)-macro","name":"authorize","doc":null,"summary":null,"abstract":false,"args":[{"name":"policy_class_override","doc":null,"default_value":"nil","external_name":"policy_class_override","restriction":""},{"name":"method_name_override","doc":null,"default_value":"nil","external_name":"method_name_override","restriction":""}],"args_string":"(policy_class_override = <span class=\"n\">nil</span>, method_name_override = <span class=\"n\">nil</span>)","source_link":"https://github.com/stephendolan/pundit/blob/f11fb556377e280aab2a5972e219b39921d1c8c0/src/pundit/action_helpers.cr#L2","def":{"name":"authorize","args":[{"name":"policy_class_override","doc":null,"default_value":"nil","external_name":"policy_class_override","restriction":""},{"name":"method_name_override","doc":null,"default_value":"nil","external_name":"method_name_override","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% caller_class_array = @type.stringify.split(\"::\") %}\n\n\n    policy_class = \n{{ (caller_class_array[0..-2].join(\"::\")).id }}\nPolicy\n\n    \n{% if policy_class_override %}\n      policy_class = {{ policy_class_override }}\n    {% end %}\n\n\n    \n{% method_name = (caller_class_array.last.underscore + \"?\").id %}\n\n\n    \n{% if method_name_override %}\n      {% method_name = method_name_override.id %}\n    {% end %}\n\n\n    policy_class.new(current_user).\n{{ method_name }}\n\n  \n"}}],"types":[]}]}]}}